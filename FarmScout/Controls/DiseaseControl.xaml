<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FarmScout.Controls.DiseaseControl">
    
    <Border BackgroundColor="#F5F5F5" Padding="15">
        <Border.StrokeShape>
            <RoundRectangle CornerRadius="10" />
        </Border.StrokeShape>
        <VerticalStackLayout Spacing="10">
            <Label Text="ðŸ¦  Disease Information" 
                   FontSize="18" 
                   FontAttributes="Bold"
                   TextColor="#2E7D32"/>
            
            <!-- Disease Name Section -->
            <StackLayout Spacing="5">
                <Label Text="Disease Name" 
                       FontSize="14" 
                       FontAttributes="Bold"
                       TextColor="#333"/>
                
                <!-- Edit/Add Mode -->
                <Grid ColumnDefinitions="*,Auto" ColumnSpacing="5" IsVisible="{Binding IsViewMode, Converter={StaticResource BoolToStringConverter}, ConverterParameter='True|False'}">
                    <Picker Grid.Column="0"
                            Title="Select Disease"
                            SelectedItem="{Binding SelectedDisease}"
                            ItemsSource="{Binding AvailableDiseases}"
                            ItemDisplayBinding="{Binding Name}"
                            IsEnabled="{Binding IsViewMode, Converter={StaticResource BoolToStringConverter}, ConverterParameter='True|False'}"
                            BackgroundColor="White"
                            TextColor="Black"/>
                    
                    <Button Grid.Column="1"
                            Text="âž•"
                            Command="{Binding AddNewDiseaseCommand}"
                            IsVisible="{Binding IsViewMode, Converter={StaticResource BoolToStringConverter}, ConverterParameter='True|False'}"
                            BackgroundColor="#4CAF50"
                            TextColor="White"
                            CornerRadius="5"
                            WidthRequest="40"
                            HeightRequest="40"/>
                </Grid>
                
                <!-- View Mode -->
                <Label Text="{Binding DiseaseName}" 
                       FontSize="16" 
                       TextColor="#666"
                       IsVisible="{Binding IsViewMode}"/>
            </StackLayout>
            
            <!-- Disease Type Section -->
            <StackLayout Spacing="5">
                <Label Text="Disease Type" 
                       FontSize="14" 
                       FontAttributes="Bold"
                       TextColor="#333"/>
                
                <!-- Edit/Add Mode -->
                <Grid ColumnDefinitions="*,Auto" ColumnSpacing="5" IsVisible="{Binding IsViewMode, Converter={StaticResource BoolToStringConverter}, ConverterParameter='True|False'}">
                    <Picker Grid.Column="0"
                            Title="Select Disease Type"
                            SelectedItem="{Binding SelectedDiseaseType}"
                            ItemsSource="{Binding AvailableDiseaseTypes}"
                            ItemDisplayBinding="{Binding Name}"
                            IsEnabled="{Binding IsViewMode, Converter={StaticResource BoolToStringConverter}, ConverterParameter='True|False'}"
                            BackgroundColor="White"
                            TextColor="Black"/>
                    
                    <Button Grid.Column="1"
                            Text="âž•"
                            Command="{Binding AddNewDiseaseTypeCommand}"
                            IsVisible="{Binding IsViewMode, Converter={StaticResource BoolToStringConverter}, ConverterParameter='True|False'}"
                            BackgroundColor="#4CAF50"
                            TextColor="White"
                            CornerRadius="5"
                            WidthRequest="40"
                            HeightRequest="40"/>
                </Grid>
                
                <!-- View Mode -->
                <Label Text="{Binding DiseaseType}" 
                       FontSize="16" 
                       TextColor="#666"
                       IsVisible="{Binding IsViewMode}"/>
            </StackLayout>
            
            <!-- Loading Indicator -->
            <ActivityIndicator IsRunning="{Binding IsLoading}"
                              IsVisible="{Binding IsLoading}"
                              HorizontalOptions="Center"
                              Margin="0,10,0,0"/>
        </VerticalStackLayout>
    </Border>
    
</ContentView> 